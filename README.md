# **Resource efficiency**
## Скрипт для создания датасета для обучения линейной и lstm моделей
Скрип позволит:
* ПОДГОТОВКА ДАННЫХ
    -  Чтение из бд по ид_проекта
    -  Создать stage.npy contractor.npy и тд
    -  Преобразуем полученные данные в нужный вид (proj_id, contr_id, PO, month, year, res_id) len = 378
            сохранение в npy 
*  ПОДГОТОВКА ТАРГЕТА
    -  Создаем/Читаем таргет
* СОЗДАНИЕ БД
    -  Возможность добавить статистику за 3 месяца

## Необходимые данные для создания датасета:
* в папке "data\Needed_materials" должны лежать следующие файлы:
    - mech_missed_ids.xlsx
    - Norms.xlsx
    - Проекты ГСП.xls

## Запуск main.py:
- Прописать все пути и флаги (смотри описание флагов ниже)
    - Если уже есть файл DATA.xlsx (собранный файл для обучения), то только указать путь(PATH_TO_PROJECTS) до него
    - Если надо создать датасет нужно указать путь(PATH_TO_SAVE_TARGETS) до target_array.npy и путь(PATH_NPY_PROJECTS) до всех npy проектов.
    - Если нет npy проектов, то либо конвертируем уже имеющиеся xlsx проекты, указав путь(PATH_EXCEL_PROJECTS), либо выгружаем из БД и возводим флаг CONNECT:
        - можно выгрузить отдельный/ые проект/ы из БД, указав PROJ_ID (можно один, можно несколько через ",")
        - можно выгрузить все проекты из БД, возведя флаг DOWNLOAD_ALL_PROJECTS_FROM_DB
    - .юююю

### Описание флагов:
    -t (--PATH_TO_TARGETS_EXCEL):str - путь до exel данных с путевого листа. По умолчанию = 'data/targets_excel/'
    -s (--PATH_TO_SAVE_TARGETS):str - путь куда сохранить обработанные данные путевого листа. По умолчанию = 'data/'
    -j (--PATH_TO_PROJECTS):str - путь куда сохранить собранный датасет. По умолчанию = 'data/'
    -p (--PATH_EXCEL_PROJECTS):str - путь до выгруженных exel проектов с БД. По умолчанию = 'data/features/'
    -n (--PATH_NPY_PROJECTS):str - путь куда сохранять npy проекты после конвертации. По умолчанию = 'data/prepred_train_data/'
    -w (--SAVE_WEIGHT):str - путь куда сохранять веса модели после обучения.  По умолчанию = 'data/WEIGHTS/'
    -d (--DOP_DATA_PATH):str - путь куда сохранять дополнительные данные 
        (такие как: feature_contractor_dict.npy,mech_res_dict.npy, targets_contractors_dict.npy ...) для создания датасета. 
        По умолчанию = 'data/dop_materials/'

    -c (--CONNECT):int - если нужно сделать выгрузку проеката из БД = 1, иначе = 0. По умолчанию = 0
    -i (--PROJ_ID):str - идентификаторы проектов, который надо выгрузить из БД. По умолчанию = 32159
    -l (--DOWNLOAD_ALL_PROJECTS_FROM_DB):int - если выгружать все проекты (id_project берется из stages.xlsx) из БД = 1, иначе = 0.
    -r (--RELOAD_DOPS):int - если нужно создать\обновить(после загрузки из бд новго объекта) дополнительные данные = 1, иначе = 0.
       По умолчанию = 0
    -v (--CONVERT):int - если нужно конвертировать проекты из xlsx в npy = 1, иначе = 0. По умолчанию = 0
    -g (--TARGET):int - если нужно создать файл npy с таргетом по проектам = 1, иначе = 0 и в PATH_TO_SAVE_TARGETS указать путь до 
       target_array.npy. По умолчанию = 0
    -a (--CREATE_DATASET):int - если нужно создать датасет = 1 (при этом должен быть указан путь до target_array.npy
       и путь для всех npy проектов из которых составлять датасет), иначе = 0.  
    -z (--ADD_STATISTIC):int - если создавать датасет со статистикой 3 месяца = 1, иначе = 0.
    


    












