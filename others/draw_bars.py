import matplotlib.pyplot as plt
import numpy as np
import datetime

month_rus = [  'январь',  'февраль',  'март',  'апрель',  'май',  'июнь',  'июль',  'август',  'сентябрь',  'октябрь',  'ноябрь',  'декабрь']

dict1 = [{'resource': ['Бульдозер среднего класса (массой 21-35т)'], 'month': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14], 'predict': [983.3837280273438, 877.7471313476562, 47.871246337890625, 1.6643714904785156, 630.7962036132812, 36.61405944824219, 196.9276123046875, 58.43522262573242, 223.85299682617188, 9.80171012878418, 179.2081298828125, 86.94931030273438, 114.36661529541016, 90.4777603149414, 5.278037071228027], 'target': [620.0, 490.0, 85.0, 20.0, 630.0, 170.01, 590.0, 60.0, 620.0, 60.0, 1080.02, 719.0, 120.05, 318.05, 0.01], 'plan': [1747.0991319999998, 863.3310809999999, 36.39459600000001, 44.672416, 359.920979, 17.05594, 156.67911700000002, 35.222899, 155.62256200000002, 4.926945, 103.370771, 58.997825000000006, 88.486405, 47.01427400000001, 3.220045]}
,{'resource': ['Экскаватор гусеничный легкого класса (массой до 15т)'], 'month': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16], 'predict': [472.9620666503906, 417.3900451660156, 680.3715209960938, 657.2574462890625, 17.662355422973633, 641.1272583007812, 1032.9031982421875, 894.2666015625, 541.7379760742188, 1386.0865478515625, 356.60748291015625, 950.60302734375, 485.72967529296875, 1549.43603515625, 882.2954711914062, 984.9478149414062, 580.156982421875], 'target': [620.0, 567.6, 597.01, 666.6, 40.0, 935.0, 734.21, 911.0, 1156.0, 1385.0, 930.5899999999999, 1775.2, 1637.0, 1550.63, 1139.02, 607.6, 597.59], 'plan': [646.8865089999999, 505.29592499999995, 584.0377149999999, 516.747013, 439.46614800000003, 359.641044, 565.652631, 729.358776, 348.56443800000005, 994.8595580000001, 190.494535, 560.759338, 272.163835, 903.505925, 544.2657640000001, 369.2164350000001, 406.10003600000005]}
,{'resource': ['Бурильно-крановая установка тяжелого класса (крутящий момент 10000-19999 кгс*м)'], 'month': [0, 1, 2, 3, 4, 5, 6], 'predict': [3567.419921875, 17.39731788635254, 148.69691467285156, 0.6692368388175964, 279.5896301269531, 458.403076171875, 2.8273072242736816], 'target': [3568.0200000000004, 0.01, 1820.02, 20.0, 190.01, 490.0, 100.05], 'plan': [17660.850128000002, 68.987827, 352.509872, 53.30812, 537.786718, 921.9311359999998, 6.271566]}
,{'resource': ['Кран автомобильный (21-25т)'], 'month': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16], 'predict': [2739.588134765625, 1319.4749755859375, 1282.9154052734375, 1539.728271484375, 60.00262451171875, 4526.10546875, 1834.210205078125, 3915.28271484375, 1413.5135498046875, 4635.35400390625, 1694.3629150390625, 4810.5517578125, 4004.033447265625, 3315.077392578125, 1108.8902587890625, 2807.325927734375, 1320.805419921875], 'target': [2742.04, 1684.77, 3560.05, 1511.01, 90.0, 4522.03, 1297.59, 4437.04, 992.0, 4621.030000000001, 1694.18, 4808.070000000001, 4062.01, 2365.06, 2559.01, 2119.36, 1493.77], 'plan': [15061.347697000001, 3093.704277, 1601.9875680000002, 2371.358044, 2198.1623069999996, 2354.9713029999994, 1755.0465110000002, 2472.36201, 1952.5617689999997, 6096.632045000001, 2091.6727939999996, 3349.9707109999995, 2893.1983609999997, 3477.0951609999997, 1160.0883469999999, 1709.7269370000001, 1219.634349]}
,{'resource': ['Сварочный агрегат передвижной (гусеничный)'], 'month': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13], 'predict': [3421.10400390625, 1150.218505859375, 2348.83837890625, 1193.7801513671875, 63.014617919921875, 2626.7763671875, 1752.761474609375, 4794.6181640625, 5250.93505859375, 2150.23876953125, 4396.9208984375, 1435.861328125, 1440.0802001953125, 1320.5867919921875], 'target': [3366.01, 657.59, 4375.059999999999, 448.01, 140.0, 4877.040000000001, 4531.0, 5116.01, 5440.41, 4739.110000000001, 4265.02, 4095.06, 3681.38, 1209.68], 'plan': [4042.6580710000003, 1512.788225, 1423.0646649999999, 963.339334, 1035.0173330000002, 916.44067, 746.1857139999998, 2168.2248289999998, 1496.6177340000004, 795.3964069999998, 2301.207368, 786.8465140000001, 499.71570999999994, 710.337039]}
,{'resource': ['Трубоукладчик тяжелого класса (81т и более)'], 'month': [0, 1], 'predict': [14.4795560836792, 2670.260986328125], 'target': [3928.13, 4470.1], 'plan': [15.524649, 1807.2753540000003]}
,{'resource': ['Автогрейдер большого класса (массой свыше 15т)'], 'month': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], 'predict': [260.7697448730469, 3.7012860774993896, 105.25269317626953, 353.02008056640625, 5.7404656410217285, 167.5105438232422, 104.46504211425781, 199.9453582763672, 12.351256370544434, 18.084720611572266], 'target': [40.0, 148.0, 50.0, 273.0, 10.0, 209.0, 186.4, 321.0, 289.0, 279.0], 'plan': [870.6171719999999, 1.1549530000000001, 22.036795999999995, 99.28187799999999, 2.844674, 40.09449, 57.20968699999999, 65.64743200000001, 5.035173, 4.353472]}
,{'resource': ['Экскаватор гусеничный тяжелого класса (массой свыше 35т)'], 'month': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16], 'predict': [2822.05029296875, 142.69586181640625, 251.28326416015625, 57.17761993408203, 6.271894454956055, 107.58488464355469, 285.97100830078125, 65.51335906982422, 280.9271240234375, 109.3216552734375, 57.064430236816406, 296.2795715332031, 217.84521484375, 192.79055786132812, 41.261138916015625, 83.20399475097656, 98.70390319824219], 'target': [6562.02, 1883.45, 5508.27, 2835.0, 130.0, 6251.13, 3050.01, 5750.01, 2322.01, 5458.0, 1872.59, 6295.030000000001, 5085.0, 4061.25, 3231.98, 1989.96, 1648.03], 'plan': [7641.850594, 36.536389, 474.434033, 39.035091, 182.63519899999997, 136.29098, 39.434599999999996, 111.48103900000001, 41.081133, 152.24608899999996, 6.705022999999999, 289.65735699999993, 197.09480900000003, 193.95061699999997, 7.007587, 5.879602, 13.616607]}
,{'resource': ['Бульдозер тяжелого класса (массой свыше 35т)'], 'month': [0, 1, 2, 3, 4, 5, 6], 'predict': [2583.080810546875, 6685.32568359375, 3.3832645416259766, 9.063522338867188, 288.18365478515625, 133.00657653808594, 13.436302185058594], 'target': [1205.0, 1060.01, 30.0, 1040.0, 1245.4, 1131.0, 1032.0], 'plan': [9843.813760000001, 26246.970955999997, 210.73033099999998, 16.239993, 433.44704200000024, 209.171114, 22.806798]}
,{'resource': ['Экскаватор гусеничный среднего класса с гидролинией (массой 16-35т)'], 'month': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13], 'predict': [956.746337890625, 1.2063549757003784, 224.298095703125, 19.464242935180664, 1.2900410890579224, 82.4587631225586, 4.026577472686768, 49.0103874206543, 90.14127349853516, 65.20487213134766, 67.91937255859375, 113.58777618408203, 1.9153045415878296, 0.4605236053466797], 'target': [620.0, 615.59, 600.0, 597.59, 20.0, 630.0, 615.59, 590.0, 611.0, 630.0, 590.0, 598.0, 562.0, 268.6], 'plan': [2802.4469499999996, 2.9012369999999996, 414.734647, 29.549471999999998, 62.32107900000001, 102.30223800000002, 4.101587, 81.675491, 125.271637, 76.06536600000003, 82.84429, 149.539702, 2.243171, 0.619545]}
,{'resource': ['Экскаватор колесный'], 'month': [0, 1, 2, 3], 'predict': [352.6945495605469, 164.02459716796875, 29.682340621948242, 202.81886291503906], 'target': [1016.59, 679.0, 448.0, 50.0], 'plan': [131.14259900000002, 81.923642, 12.363002, 97.46807500000003]}
]
print(1)
s_predict = 0
s_plan = 0
s_target = 0
monthinteger = 8

for i in range(len(dict1)):
    if monthinteger in dict1[i]['month']:
        s_predict += dict1[i]['predict'][monthinteger]
        s_plan += dict1[i]['plan'][monthinteger]
        s_target += dict1[i]['target'][monthinteger]

print(f' Project  = КС-2 Олекминская Сила Сибири Этап 5.2 \n All resource on {monthinteger} month \n predict = {s_predict}, target = {s_target}, plan_Primavera = {s_plan}')

# month = datetime.date(1900, monthinteger, 1).strftime('%B')

# print month
fig, ax = plt.subplots()
y = [s_predict, s_target, s_plan]
x = ['Предсказание ИИ', 'Целевое значение', 'Плановое значение \n из Primavera']

plt.title(f'Проект "КС-2 Олекминская Сила Сибири Этап 5.2" \n Подсчет затрат в машиночасах для всего проекта за {month_rus[monthinteger]} месяц')
color_rectangle = ['r', 'g', 'b']    # RGB
ax.bar(x, y, color = color_rectangle)
# plt.grid()
plt.show()

# print(f'Project  = КС-2 Олекминская Сила Сибири Этап 5.2 \n All resource on 0 month \n predict = {s_predict}, target = {s_target}, plan_Primavera = {s_plan}')